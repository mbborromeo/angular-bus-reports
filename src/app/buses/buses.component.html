
<mat-accordion>
  <ul id="bus-report">
    <li *ngFor="let b of buses">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <h2>{{ b.organisation }} - {{ b.date }}</h2>
        </mat-expansion-panel-header>

        <table>
          <thead>
            <tr>
              <th>Bus ID</th>
              <th>Route Variant</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let bd of b.busData">
              <td>{{ bd.busId }}</td>
              <td>{{ bd.routeVariant }}</td>
              <td>
                <span *ngIf="bd.deviationFromTimetable < 0" class="early">Early</span>
                <span *ngIf="bd.deviationFromTimetable >= 0 && bd.deviationFromTimetable < 300 && bd.deviationFromTimetable != null" class="onTime">On Time</span>
                <span *ngIf="bd.deviationFromTimetable > 300" class="late">Late</span>
                <span *ngIf="bd.deviationFromTimetable == null" class="unknown">Unknown</span>
              </td>
            </tr>
          </tbody>
        </table>
      </mat-expansion-panel>
    </li>
  </ul>
</mat-accordion>
